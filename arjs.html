<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ar.js"></script>
    <script src="https://rawgit.com/leapmotion/leapjs/0.6.4/leap-0.6.4.min.js"></script>
    <script>
      AFRAME.registerComponent("hand-tracking", {
        init: function () {
          const el = this.el;
          const scene = document.querySelector("a-scene");
          const circle = document.querySelector("#circle");

          Leap.loop(function (frame) {
            if (frame.hands.length > 0) {
              const handPosition = frame.hands[0].stabilizedPalmPosition;
              const [x, y, z] = handPosition;

              circle.setAttribute("position", `${x / 100} ${-y / 100} ${-z / 100}`);
            }
          });
        },
      });

      window.addEventListener("load", function () {
        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
          navigator.mediaDevices
            .getUserMedia({ video: true })
            .then(function (stream) {
              const video = document.querySelector("video");
              video.srcObject = stream;
              video.play();
            })
            .catch(function (error) {
              console.log("Error al acceder a la c√°mara: ", error);
            });
        }
      });
    </script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <a-scene
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false;"
      vr-mode-ui="enabled: false"
    >
      <a-entity
        id="circle"
        geometry="primitive: circle; radius: 0.1;"
        material="color: red;"
        hand-tracking
      ></a-entity>
      <a-entity camera></a-entity>
      <video id="video" style="display: none;"></video>
    </a-scene>
  </body>
</html>
